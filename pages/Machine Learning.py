import streamlit as st
import pathlib


def load_css(file_name: str) -> None:
    with open(file_name, "r") as f:
        st.markdown(f"<style>{f.read()}</style>", unsafe_allow_html=True)


css_path = pathlib.Path("css/style.css")
if css_path.exists():
    load_css(css_path)
else:
    st.error(f"CSS file not found: {css_path.resolve()}")


st.title("ðŸŒ The Earthquake")
st.subheader("The Earthquakes à¸„à¸·à¸­ à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸­à¸°à¹„à¸£ ?")
st.text("à¹€à¸›à¹‡à¸™à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸—à¸µà¹ˆà¸ˆà¸°à¸§à¸±à¸”à¸‚à¸™à¸²à¸”à¸‚à¸­à¸‡à¸‚à¸­à¸‡à¸à¸²à¸£à¹€à¸à¸´à¸”à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§ à¹à¸¥à¸° à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸‚à¸­à¸‡à¸à¸²à¸£à¹€à¸à¸´à¸”à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸¡à¸²à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸” à¹à¸¥à¹‰à¸§à¸™à¸³à¸¡à¸²à¸ˆà¸±à¸”à¹à¸ªà¸”à¸‡à¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ à¹€à¸žà¸·à¹ˆà¸­à¸œà¸¥à¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œà¸•à¹ˆà¸²à¸‡à¹† à¹€à¸Šà¹ˆà¸™à¸à¸²à¸£ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸—à¸µà¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸œà¸¥à¸à¸£à¸°à¸—à¸š à¸«à¸£à¸·à¸­ à¸­à¸·à¹ˆà¸™à¹†")
st.image("https://i.pinimg.com/736x/b5/c0/b6/b5c0b60e0339a65fd3732725c5b8ed54.jpg")
st.subheader("à¸—à¸µà¹ˆà¸¡à¸²à¸‚à¸­à¸‡ Dataset ?")
st.markdown(
    "à¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ à¸²à¸¢à¹ƒà¸™à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œ Kaggle à¹ƒà¸«à¹‰à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œà¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸—à¸±à¹ˆà¸§à¹‚à¸¥à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸„à¸£à¸šà¸–à¹‰à¸§à¸™ à¸£à¸§à¸¡à¸–à¸¶à¸‡à¸„à¸¸à¸“à¸¥à¸±à¸à¸©à¸“à¸°à¸—à¸²à¸‡à¸ à¸¹à¸¡à¸´à¸¨à¸²à¸ªà¸•à¸£à¹Œà¹à¸¥à¸°à¸à¸²à¸£à¸ªà¸±à¹ˆà¸™à¸ªà¸°à¹€à¸—à¸·à¸­à¸™à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸ à¹€à¸Šà¹ˆà¸™ à¸‚à¸™à¸²à¸”à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§ à¸„à¸§à¸²à¸¡à¸¥à¸¶à¸ à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡ à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸ à¸‹à¸¶à¹ˆà¸‡à¸—à¸³à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¹à¸«à¸¥à¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸¸à¸“à¸„à¹ˆà¸²à¸ªà¸³à¸«à¸£à¸±à¸šà¸™à¸±à¸à¸§à¸´à¸ˆà¸±à¸¢ à¸™à¸±à¸à¸§à¸´à¸—à¸¢à¸²à¸¨à¸²à¸ªà¸•à¸£à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ à¹à¸¥à¸°à¸™à¸±à¸à¸˜à¸£à¸“à¸µà¸§à¸´à¸—à¸¢à¸²à¸—à¸µà¹ˆà¸¨à¸¶à¸à¸©à¸²à¸£à¸¹à¸›à¹à¸šà¸šà¹à¸¥à¸°à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸‚à¸­à¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§ [Kaggle](https://www.kaggle.com/datasets/jay11rathod/earthquakes-dataset?resource=download)")
st.subheader("Data Features à¸¡à¸µà¸­à¸°à¹„à¸£à¸šà¹‰à¸²à¸‡ ?")
st.markdown("**place**: à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸—à¸²à¸‡à¸ à¸¹à¸¡à¸´à¸¨à¸²à¸ªà¸•à¸£à¹Œà¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§")
st.markdown(
    "**mag**: à¸‚à¸™à¸²à¸”à¸‚à¸­à¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§ à¸‹à¸¶à¹ˆà¸‡à¹ƒà¸Šà¹‰à¸§à¸±à¸”à¸à¸²à¸£à¸›à¸¥à¸”à¸›à¸¥à¹ˆà¸­à¸¢à¸žà¸¥à¸±à¸‡à¸‡à¸²à¸™à¸‚à¸­à¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§")
st.markdown("**magType**: à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¸­à¸‡à¸à¸²à¸£à¸§à¸±à¸”à¸‚à¸™à¸²à¸”à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§ à¹€à¸Šà¹ˆà¸™ ML (à¸‚à¸™à¸²à¸”à¸—à¹‰à¸­à¸‡à¸–à¸´à¹ˆà¸™), MD (à¸‚à¸™à¸²à¸”à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²), MB (à¸‚à¸™à¸²à¸”à¸„à¸¥à¸·à¹ˆà¸™à¸£à¹ˆà¸²à¸‡à¸à¸²à¸¢) à¹€à¸›à¹‡à¸™à¸•à¹‰à¸™")
st.markdown("**type**: à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¸­à¸‡à¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œà¸—à¸²à¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§ à¹€à¸Šà¹ˆà¸™ à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§, à¸à¸²à¸£à¸£à¸°à¹€à¸šà¸´à¸”, à¸«à¸£à¸·à¸­à¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œà¸—à¸²à¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸­à¸·à¹ˆà¸™à¹†")
st.markdown("**time**: à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸¥à¸°à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¹ƒà¸™à¸£à¸¹à¸›à¹à¸šà¸šà¸—à¸µà¹ˆà¸­à¹ˆà¸²à¸™à¹„à¸”à¹‰")
st.markdown("**longitude & latitude**: à¸žà¸´à¸à¸±à¸”à¸—à¸µà¹ˆà¸£à¸°à¸šà¸¸à¸—à¸µà¹ˆà¸•à¸±à¹‰à¸‡à¸—à¸µà¹ˆà¹à¸¡à¹ˆà¸™à¸¢à¸³à¸‚à¸­à¸‡à¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œ")
st.markdown("**depth_km**: à¸„à¸§à¸²à¸¡à¸¥à¸¶à¸à¸‚à¸­à¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¹ƒà¸™à¸«à¸™à¹ˆà¸§à¸¢à¸à¸´à¹‚à¸¥à¹€à¸¡à¸•à¸£")
st.markdown("**sig**: à¸¡à¸²à¸•à¸£à¸à¸²à¸£à¸‚à¸­à¸‡à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸à¸‚à¸­à¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸—à¸µà¹ˆà¸£à¸§à¸¡à¸‚à¸™à¸²à¸”à¹à¸¥à¸°à¸œà¸¥à¸à¸£à¸°à¸—à¸š")
st.markdown("**net**: à¸£à¸«à¸±à¸ªà¸‚à¸­à¸‡à¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸—à¸µà¹ˆà¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œ")
st.markdown("**nst**: à¸ˆà¸³à¸™à¸§à¸™à¸ªà¸–à¸²à¸™à¸µà¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹ƒà¸™à¸à¸²à¸£à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§")
st.markdown(
    "**dmin**: à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³à¸ˆà¸²à¸à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸–à¸¶à¸‡à¸ªà¸–à¸²à¸™à¸µà¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸—à¸µà¹ˆà¹ƒà¸à¸¥à¹‰à¸—à¸µà¹ˆà¸ªà¸¸à¸”")
st.markdown(
    "**rms**: à¸„à¹ˆà¸²à¸£à¸²à¸à¸—à¸µà¹ˆà¸ªà¸­à¸‡à¹€à¸‰à¸¥à¸µà¹ˆà¸¢à¸‚à¸­à¸‡à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¸„à¸¥à¸²à¸”à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¸‚à¸­à¸‡à¹à¸­à¸¡à¸žà¸¥à¸´à¸ˆà¸¹à¸” à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸šà¹ˆà¸‡à¸Šà¸µà¹‰à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³à¸‚à¸­à¸‡à¸à¸²à¸£à¸§à¸±à¸”")
st.markdown("**gap**: à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¹ƒà¸«à¸à¹ˆà¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸ªà¸–à¸²à¸™à¸µà¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸—à¸µà¹ˆà¸§à¸±à¸”à¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œà¸™à¸µà¹‰ à¸‹à¸¶à¹ˆà¸‡à¸­à¸²à¸ˆà¸ªà¹ˆà¸‡à¸œà¸¥à¸•à¹ˆà¸­à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³à¹ƒà¸™à¸à¸²à¸£à¸«à¸²à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§")

st.subheader(
    "à¹‚à¸”à¸¢à¸œà¸¡à¹„à¸”à¹‰à¸—à¸³à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¹ƒà¸Šà¹‰ SVM (Support Vector Machine) à¹à¸¥à¸° KNN (K-Nearest Neighbors) à¹‚à¸”à¸¢à¸¡à¸µà¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸”à¸±à¸‡à¸™à¸µà¹‰")

st.text("à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¹à¸£à¸ à¸œà¸¡à¸ˆà¸°à¸—à¸³à¸à¸²à¸£à¸™à¸³à¹€à¸‚à¹‰à¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ à¸‚à¸­à¸‡à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¹€à¸‚à¹‰à¸²à¸¡à¸² à¸žà¸£à¹‰à¸­à¸¡à¸à¸±à¸šà¸à¸³à¸«à¸™à¸” feature à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ à¹à¸¥à¸° à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š à¸žà¸šà¸—à¸±à¹‰à¸‡à¸„à¹ˆà¸² à¸§à¹ˆà¸²à¸‡ à¸«à¸£à¸·à¸­ à¸„à¹ˆà¸²à¸—à¸µà¹ˆà¸«à¸²à¸¢à¹„à¸› à¹à¸¥à¸° à¸„à¹ˆà¸² outlier à¸œà¸¡à¸ˆà¸¶à¸‡à¹„à¸”à¹‰à¸—à¸³à¸à¸²à¸£ cleansing data à¹‚à¸”à¸¢à¸„à¹ˆà¸²à¸—à¸µà¹ˆà¸«à¸²à¸¢à¹„à¸› à¸œà¸¡à¸ˆà¸°à¹à¸—à¸™à¸”à¹‰à¸§à¸¢ 0 à¹à¸¥à¸° à¹à¸à¹‰ outlier à¸”à¹‰à¸§à¸¢à¸à¸²à¸£ IQR ")

code1 = '''
df = pd.read_csv("dataset/Earthquakesdataset.csv")
st.write("à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:")
st.dataframe(df.head())

features = ["depth_km", "longitude", "latitude", "sig", "gap", "mag"]
missing_values = df.isnull().sum()
df_cleaned = df.fillna(0)


def remove_outliers(df, column):
    Q1 = df[column].quantile(0.25)
    Q3 = df[column].quantile(0.75)
    IQR = Q3 - Q1
    lower_bound = Q1 - 1.5 * IQR
    upper_bound = Q3 + 1.5 * IQR
    return df[(df[column] >= lower_bound) & (df[column] <= upper_bound)]


original_size = df_cleaned.shape[0]
for feature in features:
    if feature in df_cleaned.columns:
        df_cleaned = remove_outliers(df_cleaned, feature)
'''

st.code(code1, language='python')
st.text("à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆà¸ªà¸­à¸‡ à¹€à¸›à¹‡à¸™à¸à¸²à¸£à¸™à¸³à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸—à¸³à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¹à¸¥à¹‰à¸§ à¸¡à¸²à¹€à¸•à¸£à¸µà¸¢à¸¡à¹€à¸žà¸·à¹ˆà¸­à¸£à¸­à¸à¸²à¸£ à¹€à¸—à¸£à¸™à¹‚à¸¡à¹€à¸”à¸¥à¸­à¸µà¸à¸—à¸µà¸™à¸¶à¸‡")

code2 = '''
features_model = ["depth_km", "longitude", "latitude", "sig", "gap"]
target = "mag"

X = df_cleaned[features_model]
y = df_cleaned[target]

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42)
'''

st.code(code2, language='python')

st.text("à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸› à¸„à¸·à¸­à¸à¸²à¸£à¸™à¸³à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ à¸«à¸£à¸·à¸­ feature à¸—à¸µà¹ˆà¸ˆà¸°à¸™à¸³à¸¡à¸²à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£ train à¸¡à¸²à¸—à¸³à¸à¸²à¸£à¹€à¸—à¸£à¸™à¸—à¸±à¹‰à¸‡à¹à¸šà¸š SVM à¹à¸¥à¸° KNN à¹à¸¥à¸° à¹€à¸žà¸´à¹ˆà¸¡ dataframe à¸—à¸µà¹ˆà¸£à¸§à¸¡ features à¸œà¸¥à¸—à¸³à¸™à¸²à¸¢à¸ˆà¸²à¸à¸—à¸±à¹‰à¸‡à¸ªà¸­à¸‡à¹‚à¸¡à¹€à¸”à¸¥ à¹à¸¥à¸°à¸„à¹ˆà¸²à¸ˆà¸£à¸´à¸‡à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸­à¸­à¸à¸¡à¸²")

code3 = '''
svmmodel = SVR()
svmmodel.fit(X_train, y_train)
svmpredic = svmmodel.predict(X_test)

knnmodel = KNeighborsRegressor(n_neighbors=5)
knnmodel.fit(X_train, y_train)
knnpredic = knnmodel.predict(X_test)

predicdata = X_test.copy()
predicdata["SVMpredic"] = svmpredic
predicdata["KNNpredic"] = knnpredic
predicdata["Actual_Mag"] = y_test.values
'''
st.code(code3, language='python')

st.text("à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¸¡à¸² à¸ªà¸£à¹‰à¸²à¸‡ dropdown à¸—à¸µà¹ˆà¹ƒà¸«à¹‰à¸—à¸³à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¹‚à¸¡à¹€à¸”à¸¥à¸¡à¸²à¹à¸ªà¸”à¸‡ à¸à¸±à¸š slider à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸¥à¸·à¸­à¸à¹„à¸”à¹‰à¸§à¹ˆà¸²à¸­à¸¢à¸²à¸à¹„à¸”à¹‰à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸à¸µà¹ˆà¸—à¸µà¹ˆ à¹‚à¸”à¸¢à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸ˆà¸°à¹€à¸›à¹‡à¸™à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸‡à¸•à¸²à¸¡à¸„à¹ˆà¸²à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸—à¸µà¹ˆà¸ˆà¸°à¹€à¸à¸´à¸”")

code4 = '''
model_choice = st.selectbox("à¹‚à¸¡à¹€à¸”à¸¥à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£", ("SVM", "KNN"))

top_n = st.slider(
    "à¹€à¸¥à¸·à¸­à¸à¸§à¹ˆà¸²à¸ˆà¸°à¸”à¸¹à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸¡à¸²à¸à¸à¸µà¹ˆà¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ:", 1, 30, 10)
'''
st.code(code4, language='python')

st.text("à¹ƒà¸™à¸ªà¹ˆà¸§à¸™à¸™à¸µà¹‰ à¸ˆà¸°à¹€à¸›à¹‡à¸™à¸à¸²à¸£ à¹à¸ªà¸”à¸‡à¸œà¸¥à¸•à¸±à¸§à¸‚à¸­à¸‡ SVM à¹‚à¸”à¸¢à¸ˆà¸žà¸¡à¸µà¸à¸²à¸£à¹à¸ªà¸”à¸‡ à¸•à¸£à¸²à¸‡à¸—à¸µà¹ˆà¸ˆà¸±à¸”à¸­à¸±à¸™à¸”à¸±à¸šà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸¡à¸²à¹à¸¥à¹‰à¸§à¸¡ , à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¸„à¸¥à¸²à¸”à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™ , à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³ à¹à¸¥à¸° à¸à¸£à¸²à¸Ÿà¹à¸ªà¸”à¸‡à¸„à¹ˆà¸² mag à¸•à¸±à¸§à¹‚à¸¡à¸¥à¸«à¸²à¹„à¸”à¹‰ à¹€à¸—à¸µà¸¢à¸šà¸à¸±à¸š à¸„à¹ˆà¸²à¸ˆà¸£à¸´à¸‡")
code5 = '''
if model_choice == "SVM":
    st.subheader(
        "à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¹ƒà¸™à¸à¸²à¸£à¹€à¸à¸´à¸”à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸¡à¸²à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸‚à¸­à¸‡ (SVM)")
    st.dataframe(predicdata[["depth_km", "longitude", "latitude", "sig",
                             "gap", "SVMpredic", "Actual_Mag"]].nlargest(top_n, "SVMpredic"))

    def evaluate_model(name, y_true, y_pred):
        Error = mean_absolute_error(y_true, y_pred)
        Errorpercent = (Error / y_true.mean()) * 100

        Accuracy = r2_score(y_true, y_pred)
        Accuracypercent = Accuracy * 100

        st.subheader(f"à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸žà¹ƒà¸™à¸à¸²à¸£à¸—à¸³à¸™à¸²à¸¢à¸‚à¸­à¸‡ {name}")
        st.write(f"à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¸„à¸¥à¸²à¸”à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™: {Errorpercent:.2f} %")
        st.write(f"à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³: {Accuracypercent:.2f} %")

    evaluate_model("SVM ", y_test, svmpredic)

    def plot_comparison_svm(y_true, svmpredic):
        plt.figure(figsize=(6, 6))

        plt.scatter(y_true, svmpredic, color='pink',
                    alpha=0.6, label="SVM Predictions")
        plt.scatter(y_true, y_true, color='#87CEEB',
                    alpha=0.6, label="Actual Magnitude")
        plt.plot([y_true.min(), y_true.max()], [
                 y_true.min(), y_true.max()], 'k--', lw=2)

        plt.xlabel("Actual Magnitude")
        plt.ylabel("SVM Predicted Magnitude")
        plt.title("SVM Prediction vs Actual")
        plt.legend()

        plt.tight_layout()
        st.pyplot(plt)

    plot_comparison_svm(y_test, svmpredic)
'''

st.code(code5, language='python')

st.text("à¹à¸ªà¸”à¸‡à¸œà¸¥à¸•à¸±à¸§à¸‚à¸­à¸‡ KNN à¹‚à¸”à¸¢à¸ˆà¸žà¸¡à¸µà¸à¸²à¸£à¹à¸ªà¸”à¸‡ à¸•à¸£à¸²à¸‡à¸—à¸µà¹ˆà¸ˆà¸±à¸”à¸­à¸±à¸™à¸”à¸±à¸šà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸¡à¸²à¹à¸¥à¹‰à¸§à¸¡ , à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¸„à¸¥à¸²à¸”à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™ , à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³ à¹à¸¥à¸° à¸à¸£à¸²à¸Ÿà¹à¸ªà¸”à¸‡à¸„à¹ˆà¸² mag à¸•à¸±à¸§à¹‚à¸¡à¸¥à¸«à¸²à¹„à¸”à¹‰ à¹€à¸—à¸µà¸¢à¸šà¸à¸±à¸š à¸„à¹ˆà¸²à¸ˆà¸£à¸´à¸‡")

code6 = '''
elif model_choice == "KNN":
    st.subheader(
        "à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¹ƒà¸™à¸à¸²à¸£à¹€à¸à¸´à¸”à¹à¸œà¹ˆà¸™à¸”à¸´à¸™à¹„à¸«à¸§à¸¡à¸²à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸‚à¸­à¸‡ (KNN)")
    st.dataframe(predicdata[["depth_km", "longitude", "latitude", "sig",
                             "gap", "KNNpredic", "Actual_Mag"]].nlargest(top_n, "KNNpredic"))

    def evaluate_model(name, y_true, y_pred):
        Error = mean_absolute_error(y_true, y_pred)
        Errorpercent = (Error / y_true.mean()) * 100

        Accuracy = r2_score(y_true, y_pred)
        Accuracypercent = Accuracy * 100

        st.subheader(f"à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸žà¹ƒà¸™à¸à¸²à¸£à¸—à¸³à¸™à¸²à¸¢à¸‚à¸­à¸‡ {name}")
        st.write(f"à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¸„à¸¥à¸²à¸”à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™: {Errorpercent:.2f} %")
        st.write(f"à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³: {Accuracypercent:.2f} %")

    evaluate_model("KNN ", y_test, knnpredic)

    def plot_comparison_knn(y_true, knn_preds):
        plt.figure(figsize=(6, 6))

        plt.scatter(y_true, knn_preds, color='#87CEEB',
                    alpha=0.6, label="KNN Predictions")
        plt.scatter(y_true, y_true, color='pink',
                    alpha=0.6, label="Actual Magnitude")
        plt.plot([y_true.min(), y_true.max()], [
                 y_true.min(), y_true.max()], 'k--', lw=2)

        plt.xlabel("Actual Magnitude")
        plt.ylabel("KNN Predicted Magnitude")
        plt.title("KNN Prediction vs Actual")
        plt.legend()

        plt.tight_layout()
        st.pyplot(plt)

    plot_comparison_knn(y_test, knnpredic)
'''

st.code(code6, language='python')

st.markdown(
    """
    <a href="/Machine_Learning_Model" style="text-decoration: none;">
        <div class="mainmachine">
            <h1 style="text-shadow: 2px 2px 5px black;">Go to the model</h1>
            <h3 style="text-shadow: 2px 2px 5px black; text-align: right;">Click me!</h3>
        </div>
    </a>
    """,
    unsafe_allow_html=True
)
